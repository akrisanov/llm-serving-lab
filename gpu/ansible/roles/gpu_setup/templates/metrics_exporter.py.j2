#!/usr/bin/env python3
"""
GPU and system metrics exporter - Ansible deployment wrapper.
This is a thin wrapper that configures and runs the metrics exporter from src/.
"""

import sys
import os

# Add the source directory to Python path
sys.path.insert(0, '/opt/llm-serving-lab/src')

from monitoring.metrics_exporter import main

# Configuration from Ansible variables
os.environ['OBS_OTLP_ENDPOINT'] = '{{ obs_otlp_endpoint }}'
os.environ['VLLM_PORT'] = '{{ vllm_port }}'
os.environ['METRICS_INTERVAL'] = '30'
os.environ['GPU_TYPE'] = '{{ gpu_type | default("unknown") }}'


if __name__ == "__main__":
    main()
